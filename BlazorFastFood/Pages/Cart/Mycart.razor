@page "/cart/mycart"
@inject NavigationManager nav
@inject ICartService db
<div class="row mt-4">
    <div class="cl-6">
        <h4 class="card-title text-black-info">All Items</h4>
    </div>
    <br />
    <br />
    <div class="col-12">
        @if (cat.Any())
        {
            <div class="container">
                <div class="card">
                    @foreach (var d in cat)
                    {
                        <div class="content">
                        <h2>@d.ItemName</h2>
                        <img src="@d.ImageUrl" class="imgg"/>
                        <h5><b>Quantity: </b>@d.Qty  <b>Price:</b>Rs @d.Price</h5>

                           
                                <NavLink href="@($"order/myorder/{uid}/{d.Id}")" class="buttongreen">Placeorder</NavLink>
                                <NavLink href="@($"cart/edit/{d.Id}")" class="btn btn-primary">Edit Order</NavLink>
                                <NavLink href="@($"cart/deletefromcart/{d.Id}")" class="buttonbrown">Delete</NavLink>
                            </div>
                    }
                    </div>
                    </div>
        }
        else
        {
            <div class="summary">
            <h4 class="card-title text-black-info">No Items in Cart.</h4>
            </div>
        }
    </div>
</div>

@code {
    private List<MyOrder> cat = new List<MyOrder>();
    public int uid = Authorize.getempid();
    protected async override Task OnInitializedAsync()
    {
        string data = Authorize.getusertype();
        if(data.Equals("User"))
        {
            int d = Authorize.getempid();
            cat = await db.ShowMyCart(d);
        }
        else
        {
            nav.NavigateTo("login/register");
        }


    }

}
